# 代码规范

## 排版格式

### 代码缩进

代码缩进使用制表符, 不要使用空格键缩进.

再switch语句中, "switch" 和 "case" 标签应对齐于同一列.

### 代码行相关规范

1. 每一行的代码长度限制到80字. 超过80字符, 则分成多行编写. 并且再低优先级操作符处划分新行, 操作符放在新行之首, 划分出的新行要适当进行缩进.

```c++
perm_count_msg.head.len = NO7_TO_STAT_PERM_COUNT_LEN
	+ STAT_SIZE_PER_FRAM * sizeof( _UL );
```

2. 不要将多个语句放到一行里面, 一行只写一条语句.
3. if, for, do, while ,case等语句单独占用一行.

## 标识符命名

命名一定要清晰, 使用完整的单词或者大家都知道的缩写.

具有互斥意义的变量或者动作相反的函数应该是互斥词组命名

| add/remove   | begin/end          | create/destory      | inset/delete          |
| ------------ | ------------------ | ------------------- | --------------------- |
| first/last   | get/release        | increment/decrement | put/get    add/delete |
| lock/unlock  | open/close         | min/max             | old/new               |
| start/stop   | next/previous      | source/target       | show/hide             |
| send/receive | source/destination | copy/paste          | up/down               |

不要使用单字节命名变量, 但是允许使用i, j, k 这样的作为局部循环变量.

文件统一采用小写名.

## 函数

函数要简短而且漂亮, 并且只能完成一件事情, 函数的本地变量最好不超过5个, 否则函数就由问题, 需要重新构思函数, 将其分为更小的函数, 其特点如下

1. 一个函数只能完成一个功能. 

   在跟函数无关或者关联很弱的代码不要放到函数里, 否则会导致函数职责不明确, 难以理解和修改.

2. 重复代码提炼成函数

3. 不同函数用空行隔开

4. 函数嵌套不能过深, 新增函数最好不超过4层

5. 对函数的参数做合法性检查

6. 对函数的错误返回要做全面的处理

7. 源文件范围内定义和声明的函数, 除非外部可见, 否则都应该用static函数

   如果一个函数只在同一个文件的其他地方调用, 那么就应该用static, static确保这个函数只在声明它的文件是可见的.

## 变量

1. 一个变量只能有一个功能, 不能把一个变量当作多用途.

2. 不用或者少用全局变量

   单个文件可以使用static修饰的全局变量, 这可为文件的私有变量, 全局变量应该是模块的私有数据, 不能作用对外的接口, 使用static类型的定义, 可以防止外部文件对本文件的全局变量的非正常访问.

3. 防止局部变量和全局变量重名

4. 严禁使用未经初始化的变量作为右值

## 宏和常量?

1. 宏命名

   用于定义常量的宏的名字及枚举里的标签需要大写

   ```c++
   #define CONSTANT 0x12345
   ```

   在定义多个变量的常量时, 最好使用枚举

